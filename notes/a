# ğŸ”§ ê°•ì˜ì²˜ëŸ¼ í•˜ë ¤ë©´ (ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ í•´ê²°)

# âŒ í˜„ì¬ ì‹¤íŒ¨í•˜ëŠ” ëª…ë ¹ì–´
docker run -it --rm --network=pg-network taxi_ingest:v001 --pg_user=root --pg_pass=root --pg_host=localhost --pg_port=5432 --pg_db=ny_taxi --target_table=yellow_taxi_trips_2021_1 --year=2021 --month=1 --chunksize=100000

# âœ… ê°•ì˜ ë°©ì‹ëŒ€ë¡œ ìˆ˜ì •í•œ ëª…ë ¹ì–´ë“¤

# 1ë‹¨ê³„: ê¸°ì¡´ PostgreSQL ì»¨í…Œì´ë„ˆ ì¤‘ì§€/ì‚­ì œ
docker stop pgdatabase
docker rm pgdatabase

# 2ë‹¨ê³„: PostgreSQLì„ pg-networkì— ì—°ê²°í•´ì„œ ì‹¤í–‰
docker run -it --rm \
  -e POSTGRES_USER="root" \
  -e POSTGRES_PASSWORD="root" \
  -e POSTGRES_DB="ny_taxi" \
  -v ny_taxi_postgres_data:/var/lib/postgresql \
  -p 5432:5432 \
  --network=pg-network \
  --name pgdatabase \
  postgres:18

# 3ë‹¨ê³„: ë°ì´í„° ingest ì‹¤í–‰ (í˜¸ìŠ¤íŠ¸ëª…ì„ ì»¨í…Œì´ë„ˆ ì´ë¦„ìœ¼ë¡œ)
docker run --rm \
  --network=pg-network \
  taxi_ingest:v001 \
  --pg_user=root \
  --pg_pass=root \
  --pg_host=pgdatabase \
  --pg_port=5432 \
  --pg_db=ny_taxi \
  --target_table=yellow_taxi_trips_2021_1 \
  --chunksize=100000



   docker run -it --rm -e POSTGRES_USER="root" -e POSTGRES_PASSWORD="root" -e POSTGRES_DB="ny_taxi" -v ny_taxi_postgres_data:/var/lib/postgresql -p 5432:5432 --network=pg-network --name=pgdatabase postgres:18